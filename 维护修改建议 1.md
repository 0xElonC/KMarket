# 维护修改建议（UI 壳子）

> 目标：只改结构与可维护性，不改变现有 UI 视觉效果。

## 优先级建议（由高到低）

### P0 / 高
1. **拆分巨型组件（Terminal + PredictionChart）**
   - `pages/Terminal.tsx` 集中数据生成、定时更新、下注逻辑与页面布局，建议拆成：`terminal/data`、`terminal/hooks`、`terminal/layout`、`terminal/components`。
   - `components/PredictionChart.tsx` 目前承担尺寸监听、画布渲染、网格/预测层、滚动逻辑、子组件定义，建议拆成：`ChartCanvasLayer`、`GridLayer`、`Header`、`useChartViewport`。

2. **建立统一层级（z-index）规范**
   - 目前 z-index 在 CSS 与组件内分散，建议用统一变量/常量（如 `--z-grid` / `--z-candle` / `--z-overlay`）集中管理，防止覆盖问题反复出现。

3. **修正交互未联通的 UI 元素**
   - `ConfirmModal` 已挂载，但 `requestConfirm` 未触发；建议对接到“确认下单”按钮的点击，避免 UI 无效。

### P1 / 中
4. **清理未使用或重复的图表组件**
   - `components/CandlestickChart.tsx` 与 `components/BettingGrid.tsx` 当前未被使用，建议删除或标记为 legacy，避免维护时误用。

5. **i18n 与状态解耦**
   - `Markets` 的筛选状态直接存翻译文案，切换语言会引发逻辑错乱。建议改为内部枚举 key（如 `all/favorites/defi/l1/meta`），再做 label 映射。

6. **避免渲染期的随机值**
   - `AssetCard` 中 `Math.random()` 在渲染期生成时间，容易造成闪烁或不稳定 UI；建议改为 state 初始化或定时刷新。

### P2 / 低
7. **`updateCount` 防无限增长**
   - `updateCount` 只增不减，长期运行会导致数值过大；建议取模或在切换资产/周期时重置。

8. **`generateBettingCells` 使用惰性初始化**
   - `useState(generateBettingCells())` 应改为 `useState(() => generateBettingCells())`，减少无意义的重复生成。

9. **图标字体依赖补齐**
   - 使用了 `material-symbols-outlined`，但未引入字体；建议补充字体链接或统一替换为现有 icon 库。

10. **样式系统收敛**
   - Tailwind CDN + 全局 CSS + 组件内联样式并存，建议在进入“样式封板”后逐步收敛到一种体系，降低维护成本。

11. **自定义类名统一**
   - `custom-scrollbar` / `no-scrollbar` 使用分散且缺少明确定义，建议整理为统一的基础样式模块。

## 备注
- 上述建议全部围绕“结构与维护性”，不涉及任何 UI 视觉改动。
